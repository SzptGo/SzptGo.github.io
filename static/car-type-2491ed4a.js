import{b as e,a,r as l,h as t,Y as o,j as r,w as d,i as s,f as u,aj as i,o as n,y as p,C as c,l as m,ag as y,am as v,q as f,t as b,D as _,E as g,ae as h,_ as k}from"./index-51cf8a1b.js";import{g as w,a as I,e as x,d as C}from"./car-type-fe5ba8b8.js";const N={class:"app-container"},V={class:"toolbar-wrapper"},j={class:"card-container"},D=e({name:"ElementPlus"}),q=k(e({...D,setup(e){const k=a(!1),D=a(!1),q=a(null),z=l({typeId:"",typeName:""}),E=l({typeName:[{required:!0,trigger:"blur",message:"请输入车型名称"}]}),B=()=>{var e;null==(e=q.value)||e.validate((e=>{if(!e)return!1;void 0===U.value?I(z).then((e=>{e.data?(R(),T(),D.value=!1,g.success("新增成功")):g.error("新增失败")})):x(z).then((e=>{e.data?(R(),T(),D.value=!1,g.success("修改成功")):g.error("修改失败")}))}))},T=()=>{U.value=void 0,z.typeName="",z.typeId=""},U=a(void 0),P=a([]),R=async()=>{k.value=!0;try{const e=await w();P.value=e.data}catch(e){console.error(e),P.value=[]}finally{k.value=!1}};return R(),(e,a)=>{const l=u("el-button"),w=u("el-tooltip"),I=u("el-table-column"),x=u("el-table"),S=u("el-card"),Y=u("el-text"),$=u("el-form-item"),A=u("el-input"),F=u("el-form"),G=u("el-dialog"),H=i("loading");return n(),t("div",N,[o((n(),r(S,{shadow:"never"},{default:d((()=>[p("div",V,[p("div",null,[s(l,{type:"primary",icon:m(y),onClick:a[0]||(a[0]=e=>D.value=!0)},{default:d((()=>[c("新增车型")])),_:1},8,["icon"])]),p("div",null,[s(w,{content:"刷新表格"},{default:d((()=>[s(l,{type:"primary",icon:m(v),circle:"",onClick:R},null,8,["icon"])])),_:1})])]),s(x,{data:P.value,style:{width:"100%"},"row-key":"id",border:""},{default:d((()=>[s(I,{prop:"typeId",label:"车型ID"}),s(I,{prop:"typeName",label:"车型名称"}),s(I,{fixed:"right",label:"操作",width:"170",align:"center"},{default:d((e=>[s(l,{type:"primary",text:"",bg:"",size:"small",icon:"Edit",onClick:a=>{return l=e.row,U.value=l.typeId,z.typeName=l.typeName,z.typeId=l.typeId,void(D.value=!0);var l}},{default:d((()=>[c("修改")])),_:2},1032,["onClick"]),s(l,{type:"danger",text:"",bg:"",size:"small",icon:"Delete",onClick:a=>{var l;(l=e.row).typeId?h.confirm(`您确定删除【${l.typeName}】吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{C(l.typeId).then((()=>{g.success("删除成功"),R()}))})):g.error("无法删除该车型！")}},{default:d((()=>[c("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1})),[[H,k.value]]),s(G,{modelValue:D.value,"onUpdate:modelValue":a[4]||(a[4]=e=>D.value=e),title:void 0===U.value?"新增车型":"修改车型",onClose:T},{footer:d((()=>[s(l,{onClick:a[3]||(a[3]=e=>D.value=!1)},{default:d((()=>[c("取消")])),_:1}),s(l,{type:"primary",onClick:B},{default:d((()=>[c("确认")])),_:1})])),default:d((()=>[s(F,{model:z,ref_key:"formRef",ref:q,rules:E,"label-position":"left","label-width":"100px",size:"default",onSubmit:a[2]||(a[2]=f((()=>{}),["prevent"]))},{default:d((()=>[p("div",j,[U.value?(n(),r($,{key:0,label:"车型 ID"},{default:d((()=>[s(Y,null,{default:d((()=>[c(b(U.value),1)])),_:1})])),_:1})):_("",!0),s($,{label:"车型名称",prop:"typeName",class:"required"},{default:d((()=>[s(A,{modelValue:z.typeName,"onUpdate:modelValue":a[1]||(a[1]=e=>z.typeName=e),type:"text",clearable:"",placeholder:"请输入车型名称"},null,8,["modelValue"])])),_:1})])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-4493a9d2"]]);export{q as default};
